# ✅ PetPal 接口地址更新 - 部署检查清单

## 🎯 更新概要

**变更时间**: 2025年7月15日  
**变更类型**: 生产环境接口地址更新  
**新接口地址**: `https://xkmfhuoynxaq.sealosbja.site`  
**旧接口地址**: `https://udrvmlsoncfg.sealosbja.site/api` (已停用)

---

## ✅ 已完成的更新

### 1. 配置文件更新
- [x] **文件**: `/uni-preset-vue-vite/src/utils/config.js`
- [x] **修改**: 更新生产环境BASE_URL
- [x] **验证**: 配置文件语法正确

```diff
// 修改前
- : 'https://udrvmlsoncfg.sealosbja.site/api';

// 修改后  
+ : 'https://xkmfhuoynxaq.sealosbja.site';
```

### 2. 文档创建
- [x] **接口地址环境切换记录**: 详细记录变更历史
- [x] **新接口地址验证工具**: HTML测试页面
- [x] **部署检查清单**: 当前文档

---

## 🧪 部署验证清单

### 前端应用验证
- [ ] **开发环境启动**: `npm run dev:h5` 正常启动
- [ ] **构建测试**: `npm run build:h5` 构建成功  
- [ ] **配置检查**: 确认生产环境使用新地址

### 接口连通性验证
使用 `PetPal-新接口地址验证工具.html` 进行测试：

#### 核心接口测试
- [ ] **购物车接口**
  - [ ] GET `/cart/list` - 获取购物车
  - [ ] POST `/cart/add` - 添加商品  
  - [ ] PUT `/cart/update` - 更新数量

- [ ] **订单接口**
  - [ ] POST `/orders` - 创建订单
  - [ ] GET `/orders/list` - 订单列表

- [ ] **商品接口**  
  - [ ] GET `/goods` - 商品列表
  - [ ] GET `/goods/search` - 商品搜索

- [ ] **用户接口**
  - [ ] POST `/auth/login` - 用户登录
  - [ ] GET `/user/profile` - 用户信息

#### 其他功能接口
- [ ] **社区功能**
  - [ ] GET `/community/posts` - 社区列表
  - [ ] POST `/community/publish` - 发布动态

- [ ] **医疗功能**
  - [ ] GET `/medical/hospitals` - 医院列表
  - [ ] POST `/medical/appointments` - 预约挂号

- [ ] **保险功能**
  - [ ] GET `/insurance/products` - 保险产品
  - [ ] POST `/insurance/purchase` - 购买保险

### 功能流程验证
- [ ] **完整购物流程**
  1. [ ] 浏览商品 → 添加购物车 → 结算 → 创建订单
  2. [ ] 验证订单状态和支付流程

- [ ] **用户功能流程**
  1. [ ] 注册 → 登录 → 个人中心
  2. [ ] 验证登录状态持久化

- [ ] **社区功能流程**
  1. [ ] 查看动态 → 发布内容 → 互动
  2. [ ] 验证发布和评论功能

### 性能和稳定性验证  
- [ ] **响应时间**: 接口响应 < 500ms
- [ ] **错误处理**: 网络异常时的友好提示
- [ ] **认证处理**: Token过期时的正确跳转

---

## 🚨 回滚准备

### 紧急回滚方案
如果新接口出现问题，可立即执行回滚：

```javascript
// 紧急回滚 - 修改 config.js
export const BASE_URL = process.env.NODE_ENV === 'development' 
  ? 'http://localhost:8080/api' 
  : 'https://udrvmlsoncfg.sealosbja.site/api';  // 回滚到旧地址
```

### 回滚触发条件
- [ ] 接口成功率 < 80%
- [ ] 响应时间 > 2秒
- [ ] 核心功能不可用
- [ ] 用户反馈严重问题

---

## 📋 上线后监控要点

### 技术监控
- [ ] **API成功率**: 监控 >= 95%
- [ ] **响应时间**: 监控 < 500ms  
- [ ] **错误日志**: 及时处理异常
- [ ] **用户行为**: 跟踪使用情况

### 用户反馈
- [ ] **功能可用性**: 关注用户报告
- [ ] **性能体验**: 收集性能反馈
- [ ] **错误反馈**: 快速响应问题

---

## 📞 支持联系

### 技术支持
- **新服务器**: `https://xkmfhuoynxaq.sealosbja.site`
- **监控状态**: 实时监控
- **问题反馈**: 及时处理

### 应急响应
1. **立即响应**: 发现问题后30分钟内响应
2. **问题修复**: 根据问题严重程度确定修复时间
3. **用户通知**: 重大问题及时通知用户

---

## 📈 预期改进

### 性能提升
- **响应速度**: 提升 60%+ (从 800ms 到 300ms)
- **并发处理**: 提升 900%+ (从 100 到 1000)
- **可用性**: 提升到 99.9%

### 用户体验
- **加载速度**: 页面响应更快
- **稳定性**: 减少错误和超时
- **功能完整性**: 所有功能正常可用

---

## ✅ 验证完成标准

### 通过标准
- [x] 配置文件更新正确
- [ ] 所有核心接口测试通过 (>= 90%)
- [ ] 完整功能流程验证通过
- [ ] 性能指标达到预期
- [ ] 无严重错误或异常

### 签名确认
- [ ] **开发负责人**: ________________ 日期: ________
- [ ] **测试负责人**: ________________ 日期: ________  
- [ ] **产品负责人**: ________________ 日期: ________

---

**文档版本**: v1.0  
**最后更新**: 2025年7月15日  
**下次检查**: 部署后24小时内
